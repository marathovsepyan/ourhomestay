{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira:react-layout/lib/react_layout.js"],"names":[],"mappings":"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","file":"/packages/kadira_react-layout.js","sourcesContent":["ReactLayout = {};\nReactLayout._domLoaded = false;\nReactLayout._rootProps = {};\nReactLayout._readyCallbacks = [];\n\nReactLayout.setRootProps = function(rootProps) {\n  this._rootProps = rootProps;\n};\n\nReactLayout._buildRootNode = function() {\n  var props = this._rootProps || {};\n  props.id = 'react-root';\n  if(props.className) {\n    props.class = props.className;\n    delete props.className;\n  }\n\n  var propsString = '';\n  for(var key in props) {\n    var value = props[key];\n    propsString += key + '=\"' + value + '\" ';\n  }\n\n  var html = '<div ' + propsString + '></div>';\n  return html;\n};\n\nReactLayout._getRootNode = function() {\n  var rootNode = document.getElementById('react-root');\n\n  if(rootNode) {\n    return rootNode;\n  } else {\n    var rootNodeHtml = this._buildRootNode();\n    var body = document.getElementsByTagName('body')[0];\n    body.insertAdjacentHTML('beforeend', rootNodeHtml);\n    rootNode = document.getElementById('react-root');\n    return rootNode;\n  }\n};\n\nReactLayout.render = function(layoutClass, regions) {\n  if(Meteor.isClient) {\n    return this._renderClient(layoutClass, regions);\n  } else {\n    return this._renderServer(layoutClass, regions);\n  }\n};\n\nReactLayout._renderServer = function(layoutClass, regions) {\n  var el = React.createElement(layoutClass, regions);\n  var elHtml = ReactDOMServer.renderToString(el);\n\n  var rootNodeHtml = this._buildRootNode();\n  var html = rootNodeHtml.replace('</div>', elHtml + '</div>');\n\n  if(Package['kadira:flow-router-ssr']) {\n    var FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n    var ssrContext = FlowRouter.ssrContext.get();\n    ssrContext.setHtml(html);\n  }\n};\n\nReactLayout._renderClient = function(layoutClass, regions) {\n  var self = this;\n  this._ready(function() {\n    var rootNode = self._getRootNode();\n    var el = React.createElement(layoutClass, regions);\n    ReactDOM.render(el, rootNode);\n  });\n};\n\nReactLayout._ready = function(cb) {\n  var self = this;\n  if(self._domLoaded) {\n    cb();\n  } else {\n    self._readyCallbacks.push(cb);\n  }\n};\n\n// wait for DOM is loading\nMeteor.startup(function() {\n  setTimeout(function() {\n    ReactLayout._domLoaded = true;\n    ReactLayout._readyCallbacks.forEach(function(fn) {\n      fn();\n    });\n  }, 10);\n});\n"]}